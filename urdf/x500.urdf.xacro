<?xml version="1.0"?>
<robot name="x500_base" xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:macro name="x500_base" params="name *origin">

    <link name="${name}_base_link">
      <inertial>
        <mass value="2.0"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="0.02166666666666667" ixy="0" ixz="0" iyy="0.02166666666666667" iyz="0" izz="0.04000000000000001"/>
      </inertial>
      <visual>
        <origin xyz="0 0 .025" rpy="0 0 3.141592654"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/NXP-HGD-CF.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0.174 0.174 .032" rpy="0 0 -.45"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Base.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="-0.174 0.174 .032" rpy="0 0 -.45"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Base.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0.174 -0.174 .032" rpy="0 0 -.45"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Base.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="-0.174 -0.174 .032" rpy="0 0 -.45"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Base.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0.047 .001 .043" rpy="1 0 1.57"/>
        <geometry>
          <box size=".013 .007 0.001"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="-0.023 0 .0515" rpy="0 0 -1.57"/>
        <geometry>
          <box size=".013 .007 0.001"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="-.03 0 .0515" rpy="0 0 -1.57"/>
        <geometry>
          <box size=".032 .0034 0.001"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 .007" rpy="0 0 0"/>
        <geometry>
          <box size="0.35355339059327373 0.35355339059327373 0.05"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0 -0.098 -.123" rpy="-0.35 0 0"/>
        <geometry>
          <box size="0.015 0.015 0.21"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0 0.098 -.123" rpy="0.35 0 0"/>
        <geometry>
          <box size="0.015 0.015 0.21"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0 -0.132 -.2195" rpy="0 0 0"/>
        <geometry>
          <box size="0.25 0.015 0.015"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0 0.132 -.2195" rpy="0 0 0"/>
        <geometry>
          <box size="0.25 0.015 0.015"/>
        </geometry>
      </collision>
    </link>

    <link name="${name}_rotor_0">
      <inertial>
        <mass value="0.016076923076923075"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="3.8464910483993325e-07" ixy="0" ixz="0" iyy="2.6115851691700804e-05" iyz="0" izz="2.649858234714004e-05"/>
      </inertial>
      <visual>
        <origin xyz="-0.022 -0.14638461538461536 -0.016" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/1345_prop_ccw.stl" scale="0.8461538461538461 0.8461538461538461 0.8461538461538461"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0 0 -.032" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Bell.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.2792307692307692 0.016923076923076923 0.0008461538461538462"/>
        </geometry>
      </collision>
    </link>

    <joint name="${name}_rotor_0_joint" type="continuous">
      <parent link="${name}_base_link"/>
      <child link="${name}_rotor_0"/>
      <origin xyz="0.174 -0.174 0.06" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
    </joint>

    <link name="${name}_rotor_1">
      <inertial>
        <mass value="0.016076923076923075"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="3.8464910483993325e-07" ixy="0" ixz="0" iyy="2.6115851691700804e-05" iyz="0" izz="2.649858234714004e-05"/>
      </inertial>
      <visual>
        <origin xyz="-0.022 -0.14638461538461536 -0.016" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/1345_prop_ccw.stl" scale="0.8461538461538461 0.8461538461538461 0.8461538461538461"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0 0 -.032" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Bell.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.2792307692307692 0.016923076923076923 0.0008461538461538462"/>
        </geometry>
      </collision>
    </link>

    <joint name="${name}_rotor_1_joint" type="continuous">
      <parent link="${name}_base_link"/>
      <child link="${name}_rotor_1"/>
      <origin xyz="-0.174 0.174 0.06" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
    </joint>

    <link name="${name}_rotor_2">
      <inertial>
        <mass value="0.016076923076923075"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="3.8464910483993325e-07" ixy="0" ixz="0" iyy="2.6115851691700804e-05" iyz="0" izz="2.649858234714004e-05"/>
      </inertial>
      <visual>
        <origin xyz="-0.022 -0.14638461538461536 -0.016" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/1345_prop_cw.stl" scale="0.8461538461538461 0.8461538461538461 0.8461538461538461"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0 0 -.032" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Bell.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.2792307692307692 0.016923076923076923 0.0008461538461538462"/>
        </geometry>
      </collision>
    </link>

    <joint name="${name}_rotor_2_joint" type="continuous">
      <parent link="${name}_base_link"/>
      <child link="${name}_rotor_2"/>
      <origin xyz="0.174 0.174 0.06" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
    </joint>

    <link name="${name}_rotor_3">
      <inertial>
        <mass value="0.016076923076923075"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <inertia ixx="3.8464910483993325e-07" ixy="0" ixz="0" iyy="2.6115851691700804e-05" iyz="0" izz="2.649858234714004e-05"/>
      </inertial>
      <visual>
        <origin xyz="-0.022 -0.14638461538461536 -0.016" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/1345_prop_cw.stl" scale="0.8461538461538461 0.8461538461538461 0.8461538461538461"/>
        </geometry>
      </visual>
      <visual>
        <origin xyz="0 0 -.032" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://starling2-description/meshes/5010Bell.dae" scale="1 1 1"/>
        </geometry>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <box size="0.2792307692307692 0.016923076923076923 0.0008461538461538462"/>
        </geometry>
      </collision>
    </link>

    <joint name="${name}_rotor_3_joint" type="continuous">
      <parent link="${name}_base_link"/>
      <child link="${name}_rotor_3"/>
      <origin xyz="-0.174 -0.174 0.06" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
    </joint>

    <gazebo reference="${name}_base_link">
      <sensor name="air_pressure_sensor" type="air_pressure">
        <always_on>1</always_on>
        <update_rate>50</update_rate>
        <air_pressure>
          <pressure>
            <noise type="gaussian">
              <mean>0</mean>
              <stddev>3</stddev>
            </noise>
          </pressure>
        </air_pressure>
      </sensor>
      <sensor name="magnetometer_sensor" type="magnetometer">
        <always_on>1</always_on>
        <update_rate>100</update_rate>
        <magnetometer>
          <x>
            <noise type="gaussian">
              <stddev>0.0001</stddev>
            </noise>
          </x>
          <y>
            <noise type="gaussian">
              <stddev>0.0001</stddev>
            </noise>
          </y>
          <z>
            <noise type="gaussian">
              <stddev>0.0001</stddev>
            </noise>
          </z>
        </magnetometer>
      </sensor>
      <sensor name="imu_sensor" type="imu">
        <always_on>1</always_on>
        <update_rate>250</update_rate>
        <imu>
          <angular_velocity>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0008726646</stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0008726646</stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.0008726646</stddev>
              </noise>
            </z>
          </angular_velocity>
          <linear_acceleration>
            <x>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.00637</stddev>
              </noise>
            </x>
            <y>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.00637</stddev>
              </noise>
            </y>
            <z>
              <noise type="gaussian">
                <mean>0.0</mean>
                <stddev>0.00686</stddev>
              </noise>
            </z>
          </linear_acceleration>
        </imu>
      </sensor>
      <sensor name="navsat_sensor" type="navsat">
        <always_on>1</always_on>
        <update_rate>30</update_rate>
      </sensor>
    </gazebo>

  </xacro:macro>

</robot>